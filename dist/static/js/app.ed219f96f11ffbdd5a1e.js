webpackJsonp([1],{"/hLN":function(e,t,n){"use strict";function r(e){var t=e.game,n=t.player;return t.player=n===i.a?i.b:i.a,{game:t,valid:!0,gameEnd:!1}}t.a=r;var i=n("sAbv")},"2+AJ":function(e,t,n){"use strict";var r=n("Zrlr"),i=n.n(r),a=n("PJBX"),s=n("8eEJ"),c=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,e),this.setup=function(){return t._rules.setup(t),t.logger.log("Game started."),t},this.applyMove=function(e,n){return t._rules.applyMove(t,e,n)};var r=n.rules,c=n.logger;this._rules=r||s.a,this.logger=c,this.board=new a.a(n),this.player=null};t.a=c},"31Cy":function(e,t,n){"use strict";var r=n("woOf"),i=n.n(r),a=n("x2rv");t.a=function(e,t){var n=t.game,r=t.logger;e.component("chess-game",a.a),i()(e.prototype,{$game:n,$logger:r})}},"3OJi":function(e,t,n){"use strict";var r=n("YEQW"),i=n("/hLN"),a=n("TKUP"),s=n("6e3g"),c=n("b2Jq");t.a={movement:[a.a,s.a,r.a,i.a],win:[c.a]}},"6e3g":function(e,t,n){"use strict";function r(e){var t=e.cell1,r=e.cell2;return{valid:n.i(i.get)(t,"piece.color",null)!==n.i(i.get)(r,"piece.color",null)}}t.a=r;var i=n("M4fF");n.n(i)},"7lyb":function(e,t){},"8NI2":function(e,t,n){"use strict";function r(e){n("d9+u")}var i=n("we3F"),a=n("9IMS"),s=n("VU/8"),c=r,o=s(i.a,a.a,c,"data-v-cca13254",null);t.a=o.exports},"8eEJ":function(e,t,n){"use strict";function r(e,t,n){for(var r=0;r<t.width;r++){var i=new l.a({color:n,type:o.a});t.place({x:r,y:e,piece:i})}}var i=n("Dd8w"),a=n.n(i),s=n("3OJi"),c=n("OYWW"),o=n("bHE+"),u=n("sAbv"),l=n("quo9");t.a={setup:function(e){var t=e.board,n=t.height;e.player=u.a,t.setup(),r(n-2,t,u.a),r(1,t,u.b)},applyMove:function(e,t,r){var i=e.logger,o=n.i(c.a)(s.a,{game:e,cell1:t,cell2:r,logger:i});return a()({game:e},o)}}},"9IMS":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("table",{staticClass:"game-table"},[n("tbody",e._l(e.grid,function(t,r){return n("tr",{key:r},e._l(t,function(t,i){return n("td",{key:i,class:e.getClass(t)},[n("piece-view",e._b({nativeOn:{click:function(n){n.stopPropagation(),e.$emit("cell-click",t,i,r)}}},"piece-view",{cell:t,x:i,y:r},!1))],1)}))}))])},i=[],a={render:r,staticRenderFns:i};t.a=a},C4WL:function(e,t,n){"use strict";var r=n("fZjL"),i=n.n(r),a=n("Zrlr"),s=n.n(a),c=function e(t){var n=this;s()(this,e),this.piece=null,i()(t).forEach(function(e){return n[e]=t[e]})};t.a=c},HT4Q:function(e,t,n){"use strict";var r=n("2+AJ"),i=n("8NI2");t.a={name:"ChessGameView",data:function(){return{state:"Select a Piece",selectedCell:null,game:this.$game,gameEnd:!1,messages:[]}},mounted:function(){if(!(this.$game instanceof r.a))throw new Error("this.$game is invalid");this.loadMessages(),this.subscription=this.$logger.subscribe(this.loadMessages)},beforeDestroy:function(){"function"==typeof this.subscription&&this.subscription()},computed:{showCancel:function(){return"Select a Target"===this.state},board:function(){return this.game.board}},methods:{newGame:function(){window.location.reload()},handleCellClick:function(e){if(!this.gameEnd){var t=e.piece;switch(this.state){case"Select a Piece":if(null==t)return;this.selectedCell=e,this.state="Select a Target";break;case"Select a Target":var n=this.selectedCell,r=e,i=this.game.applyMove(n,r),a=i.game,s=i.gameEnd;this.game=a,this.gameEnd=s,this.clearSelection()}}},clearSelection:function(){this.state="Select a Piece",this.selectedCell=null},loadMessages:function(){this.messages=this.$logger.getMessages().slice()}},components:{board:i.a}}},M93x:function(e,t,n){"use strict";var r=n("xJD8"),i=n("NkXQ"),a=n("VU/8"),s=a(r.a,i.a,null,null,null);t.a=s.exports},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("/5sW"),i=n("M93x"),a=n("2+AJ"),s=n("31Cy"),c=n("nLI6");r.a.config.productionTip=!1;var o=new c.a,u=new a.a({logger:o}).setup();r.a.use(s.a,{game:u,logger:o}),new r.a({el:"#app",render:function(e){return e(i.a)}})},NTma:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("board",{staticClass:"board",attrs:{board:e.game.board},on:{"cell-click":e.handleCellClick}}),e._v(" "),n("aside",[n("div",[n("strong",[e._v("Player: ")]),e._v(e._s(e.game.player)+"\n    ")]),e._v(" "),n("div",[n("strong",[e._v("Instructions: ")]),e._v(e._s(e.state)+"\n\n      "),e.showCancel?n("button",{on:{click:function(t){t.stopPropagation(),e.clearSelection(t)}}},[e._v("Cancel")]):e._e()]),e._v(" "),n("div",[e.gameEnd?n("button",{on:{click:function(t){t.stopPropagation(),e.newGame(t)}}},[e._v("Play Again?")]):e._e()]),e._v(" "),n("div",{staticClass:"log"},e._l(e.messages,function(t,r){return n("div",{key:r},[n("div",[e._v(e._s(t))])])}))])],1)},i=[],a={render:r,staticRenderFns:i};t.a=a},NkXQ:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("chess-game")],1)},i=[],a={render:r,staticRenderFns:i};t.a=a},Ntw8:function(e,t,n){"use strict";var r=n("M4fF");n.n(r);t.a={props:{cell:{required:!0}},computed:{piece:function(){return this.cell.piece||{}},type:function(){return n.i(r.get)(this.cell,"piece.type",null)},caption:function(){return null==this.type?"":String(this.type).substr(0,2)},cssClass:function(){return"piece "+this.piece.color}}}},OYWW:function(e,t,n){"use strict";function r(e,t){var n=t.game,r=t.cell1,i=t.cell2,s=t.logger,c=r.piece,o=r.x,u=r.y,l=i.x,f=i.y,g=c.type,v=e.movement,h=e.win,d=v.find(function(e){return!e(t).valid});if(d)return s.log("Invalid Move!"),a()({},t,d);n.board=n.board.move(r,i),s.log("MOVE: "+g+" ("+o+","+u+") => ("+l+","+f+")");var p=h.find(function(e){return e(t).gameEnd});return a()({gameEnd:null!=p},t)}t.a=r;var i=n("Dd8w"),a=n.n(i)},PJBX:function(e,t,n){"use strict";var r=n("Dd8w"),i=n.n(r),a=n("Zrlr"),s=n.n(a),c=n("C4WL"),o=n("Tot7"),u=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,e),this.setup=function(){t._grid=[];for(var e=0,n=0;n<t.height;n++){t._grid[n]=[];for(var r=0;r<t.width;r++){e+=1;var a=t.cellFormatter({x:r,y:n}),s=new c.a(i()({cellId:e},a));t.setCell({x:r,y:n,cell:s})}}},this.place=function(e){var n=e.x,r=e.y,i=e.piece;t.getCell({x:n,y:r}).piece=i,i.moves=0},this.move=function(e,n){var r=e.piece;return n.piece=r,e.piece=null,r.moves+=1,t},this.getCell=function(e){var n=e.x,r=e.y;return t._grid[r][n]},this.setCell=function(e){var n=e.x,r=e.y,i=e.cell;t._grid[r][n]=i},this.getGrid=function(){return t._grid},this.getRow=function(e){return t._grid[e]},this.isValidPoint=function(e){var n=e.x,r=e.y,i=n>=0&&n<t.width&&r>=0&&r<t.height;return window.console.log("VALID",n,r,i),i},this.isVacant=function(e){return null==t.getCell(e).piece};var r=n.gridWidth,a=n.gridHeight,u=n.cellFormatter;this.width=r||8,this.height=a||8,this.cellFormatter=u||o.a};t.a=u},TKUP:function(e,t,n){"use strict";function r(e){var t=e.game,n=e.cell1,r=e.logger,i=t.player,a=n.piece,s=a.color,c=i===s;return c||r.log("Cannot move "+s+"; it is "+i+"'s turn."),{game:t,valid:c,gameEnd:!1}}t.a=r},Tot7:function(e,t,n){"use strict";t.a=function(e){var t=e.x,n=e.y;return{isDark:n%2==0?t%2==0:t%2!=0,x:t,y:n}}},YEQW:function(e,t,n){"use strict";function r(e){var t=e.game,r=e.logger,i=e.cell1,u=e.cell2,l=!0,f=t.board,g=i.piece,v=g.type,h=g.moves,d=g.color,p=u.piece;if(v!==c.a)return{valid:l};var m=i.x,b=u.x,y=u.y,w=m!==b&&null!=p,_=n.i(o.a)({board:f,cell1:i}),E=_.linear,C=[];if(w){l=!1;var x=E.northWest,M=E.southWest,k=E.northEast,P=E.southEast;C=d===s.a?[].concat(a()(x(1)),a()(k(1))):[].concat(a()(P(1)),a()(M(1))),C=C.filter(function(e){return!f.isVacant(e)}),r.log("CAPTURED: "+u.piece.type+" ("+b+", "+y+")")}else{var W=0===h?2:1,S=E.north,F=E.south;C=d===s.a?S(W):F(W),C=C.filter(function(e){return f.isVacant(e)})}return l=C.some(function(e){var t=e.x,n=e.y;return t===b&&n===y}),{valid:l}}t.a=r;var i=n("Gu7T"),a=n.n(i),s=n("sAbv"),c=n("bHE+"),o=n("bMM1")},b2Jq:function(e,t,n){"use strict";function r(e){var t=e.game,n=e.logger,r=t.board;return i(r,0,a.a)?(n.log("White Wins!"),{gameEnd:!0,valid:!0}):i(r,r.height-1,a.b)?(n.log("Black Wins!"),{gameEnd:!0,valid:!0}):{valid:!0}}function i(e,t,n){return e.getRow(t).some(function(e){return e.piece&&e.piece.color===n})}t.a=r;var a=n("sAbv")},"bHE+":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="Pawn"},bMM1:function(e,t,n){"use strict";function r(e){var t=e.board,n=e.cell1,r=n.x,o=n.y,u=function(e){return t.isValidPoint(e)};return{linear:{north:function(e){var t=s(o,e);return i(a(r,e),t).filter(u)},south:function(e){var t=c(o,e);return i(a(r,e),t).filter(u)},east:function(e){var t=a(o,e);return i(c(r,e),t).filter(u)},west:function(e){var t=a(o,e);return i(s(r,e),t).filter(u)},northWest:function(e){var t=s(o,e);return i(s(r,e),t).filter(u)},northEast:function(e){var t=s(o,e);return i(c(r,e),t).filter(u)},southEast:function(e){var t=c(o,e);return i(c(r,e),t).filter(u)},southWest:function(e){var t=c(o,e);return i(s(r,e),t).filter(u)}}}}function i(e,t){return e.map(function(e,n){return{x:e,y:t[n]}})}function a(e,t){return Array(t).fill(e)}function s(e,t){var r=e-1,i=r-t-1;return n.i(o.range)(r,i,-1)}function c(e,t){var r=e+1,i=r+t+1;return n.i(o.range)(r,i,1)}t.a=r;var o=n("M4fF");n.n(o)},"d9+u":function(e,t){},fCe8:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{class:e.cssClass},[n("span",[e._v(e._s(e.caption))])])},i=[],a={render:r,staticRenderFns:i};t.a=a},gvkF:function(e,t,n){"use strict";function r(e){n("7lyb")}var i=n("Ntw8"),a=n("fCe8"),s=n("VU/8"),c=r,o=s(i.a,a.a,c,"data-v-0e397ade",null);t.a=o.exports},h8aE:function(e,t){},nLI6:function(e,t,n){"use strict";var r=n("Zrlr"),i=n.n(r),a=window,s=a.Set,c=function e(){var t=this;i()(this,e),this.getMessages=function(){return t._messages},this.subscribe=function(e){return t._subscribers.add(e),function(){return t._subscribers.delete(e)}},this.log=function(e){window.console.log("MESSAGE",e),t._messages.push(e),t._subscribers.forEach(function(e){return e()})},this.clear=function(){t._messages.length=0,t._subscribers.forEach(function(e){return e()})},this._subscribers=new s,this._messages=[]};t.a=c},quo9:function(e,t,n){"use strict";var r=n("Zrlr"),i=n.n(r),a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,e);var n=t.color,r=t.type;if(null===n)throw new Error("color is required");if(this.color=n,null===r)throw new Error("type is required");this.type=r,this.moves=0};t.a=a},sAbv:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r="white",i="black"},we3F:function(e,t,n){"use strict";var r=n("gvkF");t.a={props:{board:{required:!0}},computed:{grid:function(){return this.board.getGrid()},width:function(){return this.board.width},height:function(){return this.board.height}},methods:{getClass:function(e){return e.isDark?"cell cell-dark":"cell cell-light"}},components:{pieceView:r.a}}},x2rv:function(e,t,n){"use strict";function r(e){n("h8aE")}var i=n("HT4Q"),a=n("NTma"),s=n("VU/8"),c=r,o=s(i.a,a.a,c,"data-v-6fa81cfc",null);t.a=o.exports},xJD8:function(e,t,n){"use strict";t.a={name:"app"}}},["NHnr"]);
//# sourceMappingURL=app.ed219f96f11ffbdd5a1e.js.map